---
name: agent-memory-recall
description: 過去に記憶した情報を思い出す。「思い出して」「何だっけ」「前に話した」「記憶を検索」などで発火。
---

# Recall Skill

ユーザーが「思い出して」「何だっけ」「前に話した〇〇」と言った時に、保存された記憶を検索・取得します。

## Progressive Disclosure（段階的開示）

コンテキストを節約するため、以下の順序で情報を開示します：

### Step 1: インデックス検索
まず `.memories/index.md` を読み、関連するエントリを特定。

### Step 2: 要約の提示
該当ファイルの Summary セクションのみを提示。

### Step 3: 詳細の展開（必要に応じて）
ユーザーが「詳しく」と言った場合のみ、Details セクションを読み込む。

## 検索方法

### キーワード検索
```bash
# ripgrep で .memories/ 内を検索
rg "<keyword>" .memories/ --type md
```

### タグ検索
```bash
# タグで絞り込み
rg "#api" .memories/
```

### 日付検索
```bash
# 特定日以降の記憶
ls -la .memories/ | grep "2026-01"
```

## 応答形式

### 見つかった場合
```
📝 関連する記憶が見つかりました：

1. **API設計方針** (2026-01-22)
   RESTful API の設計ルール、エンドポイント命名規則

2. **認証フロー** (2026-01-22)
   OAuth2 + JWT の実装方針

詳しく見たい番号を教えてください。
```

### 見つからなかった場合
```
🔍 「〇〇」に関する記憶は見つかりませんでした。

関連しそうなキーワード：
- API → 3件
- 認証 → 2件

これらを検索しますか？
```

## 重要

- 最初から全文を読み込まない（コンテキスト節約）
- 複数マッチした場合は一覧を提示
- ユーザーの選択を待ってから詳細を展開
